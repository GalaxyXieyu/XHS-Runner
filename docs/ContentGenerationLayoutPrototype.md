# 内容生成布局优化原型（动态版本待评审）

> 目标：默认展示为参考图 Image #1；切换 Agent 模式时展示参考图 image copy 2（含参数表单/模型切换）；输入后开始运行时呈现参考图 image copy 的动态结果布局；素材库位于底部预览，任务管理/素材库切换按钮位于顶部右上角。

## 0. 参考图

- 默认态：`references/image.png`（Image #1）
- Agent 模式态：`references/image copy 2.png`
- 运行/结果态：`references/image copy.png`

## 1. 关键决策与默认值

**默认态**
- 进入内容生成页默认展示“默认态”布局（对应 Image #1）。
- Agent 模式需显式切换。

**Agent 模式态**
- 切换后显示参数表单（生成偏好/比例/模型等），对应 image copy 2。
- 参数表单支持切换模型。

**运行/结果态**
- 当输入完成并开始运行后，切换到“运行/结果态”布局（对应 image copy）。
- 结果展示为“对话框到底部 + 图/文/标题/tag 同容器”。

**定时任务创建（简化逻辑）**
- 定时任务基于某一次“立即生成”结果创建。
- 默认时间：每天 09:00（Asia/Shanghai）。
- 默认频率：每日一次。
- 无可用立即生成结果时，按钮置灰并提示“请先完成一次立即生成”。

## 1.1 状态映射（默认态 / Agent 模式态 / 运行态）

| 状态 | 触发条件 | 主布局/可视元素 | 主要组件 |
| --- | --- | --- | --- |
| 默认态 | 进入内容生成页 | 主输入卡片 + 快捷入口 + 推荐卡片；底部素材库预览 | `CreativeTab`、内容生成主卡片、`MaterialGallery` |
| Agent 模式态 | 点击“Agent 模式”入口 | 参数表单弹层（生成偏好/比例/模型）+ 底部输入区 | `CreativeTab`、`AgentCreator`、参数表单组件 |
| 运行态 | 输入 idea 并触发生成 | 结果流单容器卡片 + 输入框贴底 | `CreativeTab`、`ContentResultCard`、结果流容器 |

## 2. 动态布局原型（ASCII）

### 2.1 默认态（对应 Image #1）

```
┌──────────────────────────────────────────────────────────────────────┐
│  顶部标题区                                  [素材库] [任务管理]       │
│  AI 智能创作                                                     ↗   │
├──────────────────────────────────────────────────────────────────────┤
│                                                                      │
│                 [主输入卡片：说说今天想做点什么]                      │
│                 [快捷入口/模式胶囊/按钮组]                            │
│                                                                      │
│                      [功能卡片/推荐卡片]                              │
│                                                                      │
├──────────────────────────────────────────────────────────────────────┤
│  底部素材库预览                                                     │
│  [素材卡片…] [素材卡片…] [查看更多]                                  │
└──────────────────────────────────────────────────────────────────────┘
```

### 2.2 Agent 模式态（对应 image copy 2）

```
┌──────────────────────────────────────────────────────────────────────┐
│  顶部标题区                                  [素材库] [任务管理]       │
├──────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  （弹出式参数表单）                                                  │
│  ┌───────────────────────────────────────────────────────────────┐   │
│  │  生成偏好 / 自动开关 / 图片-视频切换 / 比例 / 模型 / 其他设置  │   │
│  └───────────────────────────────────────────────────────────────┘   │
│                                                                      │
│  底部输入区（Agent 模式已激活）                                      │
│  [Agent 模式]  [输入框 ... idea]  [发送/回车]                         │
├──────────────────────────────────────────────────────────────────────┤
│  底部素材库预览                                                     │
└──────────────────────────────────────────────────────────────────────┘
```

### 2.3 运行/结果态（对应 image copy）

```
┌──────────────────────────────────────────────────────────────────────┐
│  顶部标题区                                  [素材库] [任务管理]       │
│  搜索/筛选/类型                                                     │
├──────────────────────────────────────────────────────────────────────┤
│  结果流（单容器卡片）                                                │
│  ┌───────────────────────────────────────────────────────────────┐   │
│  │ 标题 Title                                                     │   │
│  │ Tag: #标签1 #标签2 #标签3                                     │   │
│  │                                                               │   │
│  │ 正文内容（文本段落）                                           │   │
│  │                                                               │   │
│  │ [图1] [图2] [图3]                                              │   │
│  └───────────────────────────────────────────────────────────────┘   │
│                                                                      │
├──────────────────────────────────────────────────────────────────────┤
│  底部输入区（对话框贴底）                                            │
│  [模式切换] [输入框 ... idea] [发送/回车]                             │
├──────────────────────────────────────────────────────────────────────┤
│  底部素材库预览                                                     │
└──────────────────────────────────────────────────────────────────────┘
```

## 3. 交互流程（简化版）

**默认态 → Agent 模式态**
1. 用户在默认态页面点击“Agent 模式”入口。
2. 弹出参数表单，可选择模型/比例等。

**Agent 模式态 → 运行/结果态**
1. 用户输入 idea。
2. 回车或点击发送后进入运行态。
3. 结果以单容器卡片方式渲染在结果流中。

**定时任务创建**
1. 在“立即生成”结果卡片上提供“创建定时任务”。
2. 使用默认时间/频率创建（可在弹窗中调整）。

## 4. 开发落点（文件方向提示）

- `src/features/workspace/components/CreativeTab.tsx`：布局切换、输入区位置、运行态结果流。
- `src/features/material-library/components/MaterialGallery.tsx`：底部素材库预览。
- `src/features/material-library/components/ContentResultCard.tsx`：结果卡片内标题/正文/图/tag 同容器渲染。

## 5. 评审点（请确认）

1. Agent 模式参数表单字段是否与 image copy 2 对齐（生成偏好/比例/模型等）。
2. 默认定时任务时间：每天 09:00 是否合适？
3. 定时任务创建时是否允许修改时间/频率？
