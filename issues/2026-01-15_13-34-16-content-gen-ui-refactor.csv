"id","priority","phase","area","title","description","acceptance_criteria","test_mcp","review_initial_requirements","review_regression_requirements","dev_state","review_initial_state","review_regression_state","git_state","owner","refs","notes"
"XHS-010","P1","1","frontend","梳理内容生成状态流与入口","盘点内容生成页的现有组件与入口，补充默认态/Agent态/运行态的状态映射与入口说明。","在 docs/ContentGenerationLayoutPrototype.md 中新增状态映射表，列出三态触发条件与入口；并标注涉及的主要组件。","AUTOFRONTEND","确认状态映射与原型一致；不引入行为变更；引用路径准确。","测试范围：文档一致性检查；测试边界：缺失状态/入口、错误引用；测试方法：人工对照原型图与文档内容逐项核对并记录。","已完成","已完成","已完成","已提交","","docs/ContentGenerationLayoutPrototype.md:1;src/features/workspace/components/CreativeTab.tsx:36","picked_reason:先处理文档映射，便于后续UI改动对齐;done_at:2026-01-15;evidence:added_state_mapping_table"
"XHS-020","P1","2","frontend","定义三态状态机与数据流边界","在内容生成页明确默认态/Agent态/运行态的状态机与数据流边界，形成可执行的状态切换逻辑。","代码中存在清晰的状态表示与切换条件；与 API 交互边界与错误处理在注释或文档中有明确说明。","AUTOFRONTEND","对齐 React/Next.js 性能最佳实践，避免无必要的全量重渲染；保持现有 API 行为不变。","测试范围：状态切换/输入触发/错误提示；测试边界：空 idea、超长 idea；异常场景：接口错误；业务规则：仅按触发条件切换状态；测试方法：运行 dev 环境手动切换并记录。；使用 chrome-mcp 进行 UI 测试（如可用）。","已完成","已完成","已完成","已提交","","src/features/workspace/components/CreativeTab.tsx:36;src/features/workspace/components/CreativeTab.tsx:92;src/pages/api/agent/stream.ts:23","picked_reason:优先明确三态状态机与数据流边界以指导后续布局改动;done_at:2026-01-15;evidence:ui_state_mapping_and_data_flow_comments;validation_limited:tests_not_run;manual_test:npm run dev; verify state transitions (default/agent/running) and error prompts;risk:medium includes unrelated agent stream query change;scope_note:included src/pages/api/agent/stream.ts change per user request"
"XHS-030","P1","3","frontend","重构默认态布局为 Image #1","默认态布局以现有功能入口为主（立即生成输入、Agent 入口、素材库预览），仅做视觉美化，不改变功能逻辑。","默认态展示现有功能入口并可用；布局与交互保持现有逻辑；视觉样式提升（卡片/间距/字体/按钮统一）。","AUTOFRONTEND","布局调整不影响现有数据加载；注意可访问性与交互一致性。","测试范围：默认态布局、素材库预览、入口按钮；测试边界：素材库为空/过多；异常场景：加载失败提示；业务规则：仅默认态展示该布局；测试方法：运行 dev 环境手动核对布局。；使用 chrome-mcp 进行 UI 测试（如可用）。","已完成","已完成","已完成","已提交","","docs/ContentGenerationLayoutPrototype.md:33;src/features/material-library/components/MaterialGallery.tsx:26;src/features/workspace/components/GenerationSection.tsx:224","picked_reason:优先落地默认态布局便于后续Agent与运行态对齐;done_at:2026-01-15;evidence:default_landing_layout_block;scope_note:included src/pages/api/agent/stream.ts change per user request;reopened:user_feedback_function_first_ui_polish;picked_reason:重新按现有功能重构默认态并做美化;evidence:oneclick_layout_polish;picked_reason:按现有功能继续优化默认态并美化;done_at:2026-01-15;evidence:chrome_mcp_default_layout_screenshot@localhost:3001;test:chrome-mcp default layout (material gallery empty)"
"XHS-040","P1","4","frontend","实现 Agent 模式布局与参数表单","Agent 模式仅做视觉与布局升级，保持 AgentCreator 现有功能与交互链路不变。","Agent 模式视觉风格与 references/image copy 2.png 方向一致（布局层次、间距、色块、按钮样式）；保留现有功能（参数输入/模型切换/比例/生成动作）；表单/卡片不遮挡输入框；响应式不破坏（窄屏不溢出）。","AUTOFRONTEND","仅视觉与布局调整；组件拆分合理、避免重复渲染；遵循 React/Next 性能最佳实践。","测试范围：Agent 模式视觉对齐、参数表单展示、模型切换、输入框交互；测试边界：空 idea、超长 idea、切换中断；异常场景：表单校验错误提示；业务规则：仅 Agent 模式展示表单；测试方法：使用 chrome-mcp 进行 UI 测试并截图记录。","已完成","已完成","已完成","已提交","","docs/ContentGenerationLayoutPrototype.md:52;src/features/workspace/components/GenerationSection.tsx:671;src/features/agent/components/AgentCreator.tsx:123;src/features/workspace/components/GenerationSection.tsx:688","picked_reason:先实现 Agent 模式表单以匹配原型 image copy 2;done_at:2026-01-15;evidence:agent_preference_panel;scope_note:add_gitignore_for_assets;scope_note:included src/pages/api/agent/stream.ts change per user request;reopened:user_feedback_function_first_ui_polish;picked_reason:继续优化 Agent 模式布局与参数表单;done_at:2026-01-15;evidence:chrome_mcp_agent_layout_screenshot@localhost:3001;test:chrome-mcp agent mode panel + model/aspect ratio;picked_reason:user_feedback_agent_style_match_ref;done_at:2026-01-15;test:chrome-mcp agent mode layout polish;evidence:chrome_mcp_agent_layout_optimized.png;chrome_mcp_agent_layout_ratio_1-1.png;chrome_mcp_agent_layout_input_filled.png"
"XHS-050","P1","5","frontend","实现运行/结果态布局与单容器结果卡片","运行态结果展示沿用现有生成数据，结果卡片做样式优化与信息层级整理，不改数据来源。","结果卡片展示标题/正文/标签/图片；来源为现有 ideaContentPackage；视觉样式优化且可读性提升。","AUTOFRONTEND","结果卡片复用现有组件，避免不必要的 state 复制；注意长文本性能。","测试范围：结果渲染/输入区贴底/空态；测试边界：无图/无 Tag/超长正文；异常场景：API 返回空 tasks/assets；业务规则：运行态只在开始生成后出现；测试方法：手动验证并截图。；使用 chrome-mcp 进行 UI 测试（如可用）。","已完成","已完成","已完成","已提交","","docs/ContentGenerationLayoutPrototype.md:71;src/features/material-library/components/ContentResultCard.tsx:42;src/features/workspace/components/GenerationSection.tsx:326","picked_reason:运行态结果卡片是核心展示，需要先落地;done_at:2026-01-15;evidence:content_result_card_in_running_state;scope_note:included src/pages/api/agent/stream.ts change per user request;reopened:user_feedback_function_first_ui_polish;picked_reason:优化结果卡片排版与信息层级;done_at:2026-01-15;evidence:chrome_mcp_running_state_screenshot@localhost:3001;test:chrome-mcp preview+confirm+running state (empty image, queued tasks)"
"XHS-060","P1","6","frontend","简化定时任务创建为“基于立即生成结果”","定时任务仅从某次立即生成结果创建；无结果时入口置灰；提供默认时间/频率并可在弹窗中调整。","结果卡片具备创建定时任务入口；无结果时入口不可用且提示；默认时间 09:00、频率每日一次可应用。","AUTOFRONTEND","避免创建空任务；保留现有任务列表展示；不影响任务查询接口。","测试范围：创建入口/默认值/编辑弹窗；测试边界：无结果、重复点击；异常场景：创建失败提示；业务规则：仅从结果创建；测试方法：手动创建并验证列表更新。；使用 chrome-mcp 进行 UI 测试（如可用）。","已完成","已完成","已完成","已提交","","src/features/workspace/components/CreativeTab.tsx:108;src/features/material-library/components/ContentResultCard.tsx:115;src/features/workspace/components/GenerationSection.tsx:230;src/features/workspace/components/GenerationSection.tsx:674","picked_reason:定时任务入口与默认值是关键链路;done_at:2026-01-15;evidence:schedule_entry_from_result;validation_limited:tests_not_run;manual_test:npm run dev; generate result then click 定时发布 and verify default schedule;risk:low scheduling UI not exercised"
"XHS-070","P2","7","frontend","应用性能最佳实践与 Web 界面规范审查","对核心界面做性能与视觉规范优化，重点提升可读性与一致性，保证现有功能路径不被改动。","至少完成一处性能优化（常量/拆分/避免无意义渲染）+ 可访问性改进；UI 样式一致性提升。","AUTOFRONTEND","遵循 vercel-react-best-practices；不引入新依赖；保持现有交互。","测试范围：布局/交互/滚动性能；测试边界：长列表/长文本/低性能设备；异常场景：审查指南获取失败；业务规则：功能不回退；测试方法：手动 UI 测试 + 如可联网则运行 web-design-guidelines。；使用 chrome-mcp 进行 UI 测试（如可用）。","已完成","已完成","已完成","已提交","","src/features/workspace/components/GenerationSection.tsx:148;src/features/material-library/components/MaterialGallery.tsx:29;src/features/material-library/components/ContentResultCard.tsx:42","picked_reason:先做性能与规范审查避免后续返工;done_at:2026-01-15;evidence:hoist_feature_cards_const;reopened:user_feedback_function_first_ui_polish;picked_reason:补齐性能最佳实践与界面规范审查;done_at:2026-01-15;performance:useMemo ideaProgress to avoid repeated filtering;a11y:aria-labels for icon buttons + button semantics + img dimensions;web_guidelines_review:/tmp/web-interface-guidelines.md;test:chrome-mcp UI checks (default/agent/running states)"
"XHS-080","P2","8","frontend","执行手动验证并记录证据","按计划执行手动 smoke test，覆盖三态切换、生成流程、定时任务与素材库预览，并记录证据。","使用 chrome-mcp 覆盖默认态/Agent态/运行态的 UI 测试与截图记录；包含至少一次成功生成与一次错误/空态验证。","AUTOFRONTEND","测试步骤与验收标准一致；记录可复现。","测试范围：正常/边界/异常/业务规则；测试边界：空 idea、超长 idea、无素材、无结果；测试方法：先运行 npm run dev，再用 chrome-mcp 依次验证默认态/Agent态/运行态并记录截图。","已完成","已完成","已完成","已提交","","plan/2026-01-15_13-27-53-content-gen-ui-refactor.md:12","picked_reason:收口手动验收记录以闭环;done_at:2026-01-15;reopened:user_feedback_function_first_ui_polish;done_at:2026-01-15;test:chrome-mcp default/agent/running flows;empty_state:material_gallery_empty;success_state:task_done_with_image;preview_flow:prompt_preview+confirm;scheduled_task:opened default schedule modal (09:00 daily);evidence:chrome_mcp_default_layout_screenshot@localhost:3001;chrome_mcp_agent_layout_screenshot@localhost:3001;chrome_mcp_running_state_screenshot@localhost:3001;chrome_mcp_schedule_modal_screenshot@localhost:3001;chrome_mcp_done_image_screenshot@localhost:3001;done_at:2026-01-15;test:chrome-mcp agent layout re-check;evidence:chrome_mcp_agent_layout_optimized.png;chrome_mcp_agent_layout_ratio_1-1.png;chrome_mcp_agent_layout_input_filled.png"
