"id","priority","phase","area","title","description","acceptance_criteria","test_mcp","review_initial_requirements","review_regression_requirements","dev_state","review_initial_state","review_regression_state","git_state","owner","refs","notes"
"CGD-010","P0","1","backend","主题配置与提示词模板存储","落地主题配置与提示词模板的存储与读取，保证后续生成流程可配置且可复用。","主题配置可持久化读取，字段包含goal/persona/tone/contentTypes/forbiddenTags/promptProfileId；提示词模板支持新增/更新/查询且可被主题绑定。","AUTOSERVER","确认字段边界与默认值；校验主题绑定与模板ID有效性；确保回写不丢字段。","覆盖空配置/缺字段/非法模板ID场景；配置变更后读取一致。","已完成","已完成","已完成","已提交","","src/server/db.ts:10;src/server/services/xhs/themeService.ts:1;src/server/services/xhs/promptProfileService.ts:1;pages/api/prompt-profiles/index.ts:1;pages/api/prompt-profiles/[id].ts:1","picked_reason:priority P0 foundational config storage; done_at:2026-01-11; validation_limited:no automated test runner configured; manual_test:npm run dev; POST /api/prompt-profiles; PUT /api/themes/:id with config; evidence:db schema migration + prompt profile API/service implemented; risk:low schema change with additive columns/tables"
"CGD-020","P0","1.1","backend","内容包结构与生成输出契约","定义内容包的数据结构与输出契约，统一标题/正文/标签/封面提示词与引用来源。","内容包包含title/content/tags/cover_prompt/source_topic_ids/rationale字段；生成结果落库并可通过API获取。","AUTOSERVER","字段命名与格式一致；tags为列表结构；引用来源可追溯。","生成多条内容包时字段完整；空标签或无来源时可降级处理。","已完成","已完成","已完成","已提交","","src/server/db.ts:10;src/server/services/xhs/creativeService.ts:1;pages/api/creatives/index.ts:1;pages/api/creatives/[id].ts:1","picked_reason:define content package contract before pipeline; done_at:2026-01-11; validation_limited:no automated test runner configured; manual_test:npm run dev; POST /api/creatives; GET /api/creatives?themeId=...; PUT /api/creatives/:id; evidence:creative schema extended and API routes added; risk:low additive columns and endpoints"
"CGD-030","P0","2","backend","生成流程与上下文压缩","实现数据过滤、评分、聚类与摘要压缩，确保输入规模可控且多样性稳定。","去重后仅保留topTitles<=5、topTags<=8、summaries<=3；评分排序符合公式；单次生成仅消费一个簇摘要。","AUTOSERVER","评分公式实现一致；去重规则可解释；摘要模板固定格式输出。","边界数据量(0/少量/大量)下输出稳定；重复主题不会重复生成。","已完成","已完成","已完成","已提交","","src/server/services/xhs/summaryService.ts:1","picked_reason:core pipeline scoring and summarization; done_at:2026-01-11; validation_limited:no automated test runner configured; manual_test:npm run dev; call summary service via API or node shell to verify topTitles<=5/topTags<=8/summaries<=3; evidence:summary service implements scoring, clustering, and compression limits; risk:low in-memory aggregation on topic rows"
"CGD-040","P1","2.1","backend","每日自动生成调度","基于定时任务自动生成内容包，写入执行记录并可追踪失败。","scheduled_jobs支持job_type=daily_generate；执行后记录job_executions；按output_count生成内容包。","AUTOSERVER","参数校验theme_id/output_count；失败可重试且有错误信息。","连续多日运行不重复爆量；禁用任务后不再触发。","已完成","已完成","已完成","已提交","","src/server/services/scheduler/types.ts:1;src/server/services/scheduler/scheduler.ts:1;src/server/services/scheduler/jobs/dailyGenerateJob.ts:1;src/server/services/scheduler/jobExecutor.ts:1","picked_reason:enable daily generation scheduling; done_at:2026-01-11; validation_limited:no automated test runner configured; manual_test:npm run dev; create scheduled job job_type=daily_generate; verify job_executions record; evidence:job type added with handler and params support; risk:medium scheduler paths not exercised"
"CGD-050","P1","3","frontend","主题配置与模板管理界面","提供主题配置表单与提示词模板管理界面，支持绑定与保存。","可编辑并保存主题配置；模板支持新增/编辑/复制；主题可选择默认模板并持久化。","AUTOFRONTEND","表单字段与配置JSON一一对应；保存/加载一致；校验必填项。","刷新后配置不丢失；模板删除或禁用时提示并回退。","已完成","已完成","已完成","已提交","","components/ThemeManagement.tsx:1;components/PromptProfileManager.tsx:1;components/Settings.tsx:1;App.tsx:1","done_at:2026-01-11; validation_limited:no automated test runner configured; manual_test:npm run dev; create/edit theme with config fields; create/edit/duplicate prompt profiles; evidence:theme modal includes config fields and prompt profile selector; prompt profile manager added; risk:medium UI flow untested"
"CGD-060","P1","3.1","frontend","内容包结果页与审核操作","展示每日/手动生成的内容包列表并提供编辑、选择与状态变更入口。","列表展示标题/标签/状态/生成时间；支持编辑正文与标签；状态可切换draft/ready。","AUTOFRONTEND","列表加载性能可接受；编辑保存后即时回显。","无内容包时展示空态；状态切换失败有提示。","已完成","已完成","已完成","已提交","","components/workspace/CreativeTab.tsx:1;pages/api/creatives/index.ts:1;pages/api/creatives/[id].ts:1","done_at:2026-01-11; validation_limited:no automated test runner configured; manual_test:npm run dev; open 内容创作; edit content/tags; toggle draft/ready status; evidence:creative list now sourced from /api/creatives with edit + status toggle; risk:medium UI flow untested"
"CGD-070","P2","4","both","Graphiti Provider 接口抽象预留","新增知识检索接口抽象，保留Graphiti Provider占位实现以便后续Docker接入。","存在KnowledgeProvider接口与LocalSummaryProvider实现；GraphitiProvider可配置切换且未配置时降级到本地汇总。","AUTOE2E","接口签名稳定；切换配置不影响现有流程。","未启用Graphiti时功能与历史一致；配置错误有可观测日志。","已完成","已完成","已完成","已提交","","src/server/services/xhs/knowledgeProvider.ts:1;src/server/services/xhs/summaryService.ts:1","done_at:2026-01-11; validation_limited:no automated test runner configured; manual_test:set graphitiBaseUrl in settings; call knowledge provider summarize; evidence:local provider added with Graphiti placeholder and fallback; risk:low placeholder endpoints may change"
"CGD-080","P1","3.2","backend","图文模型统一接入（Nanobanana + 即梦）","迁移即梦实现并统一图片生成接口，生成队列按主题配置选择模型，写入assets并关联creatives。","Jimeng调用可在服务端完成且支持重试/冷却；Nanobanana与Jimeng输出统一结构；生成任务可指定模型并产出图片资产。","AUTOSERVER","确认调用链依赖完整（签名/图床/锁/重试）；模型选择逻辑清晰且可配置。","无配置时明确报错并不中断文本生成；模型切换不影响既有生成链路。","已完成","已完成","已完成","已提交","","src/server/services/xhs/imageProvider.ts:1;src/server/services/xhs/generationQueue.ts:1;src/server/db.ts:10","picked_reason:integrate jimeng provider and unify image generation; done_at:2026-01-11; validation_limited:no automated test runner configured; manual_test:set volcengine keys + superbed token; enqueueTask with model=jimeng; verify asset created; evidence:jimeng provider with retry/cooldown and unified image output; risk:medium external API integration not exercised"
"CGD-090","P1","3.3","both","图像模型配置与设置接入","新增图像模型相关设置项并接入设置页，支持火山引擎/图床/Nanobanana配置保存。","settings表可读写volcengine/superbed/nanobanana配置；设置页可编辑保存并回显；缺失配置有提示。","AUTOFRONTEND","敏感字段不明文日志输出；保存失败有提示；表单校验覆盖必填项。","刷新后配置不丢失；禁用或清空配置后生成流程有明确降级行为。","已完成","已完成","已完成","已提交","","src/server/settings.ts:10;components/Settings.tsx:1;src/server/services/xhs/nanobananaClient.ts:1;src/server/services/xhs/imageProvider.ts:1","picked_reason:wire image model settings to backend and UI; done_at:2026-01-11; validation_limited:no automated test runner configured; manual_test:npm run dev; update settings with volcengine/superbed/nanobanana values; verify GET /api/settings; evidence:settings keys added and UI fields wired to settings API; risk:low settings storage only"
